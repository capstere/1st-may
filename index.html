<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <title>Return of the JESP</title>

  <!-- Preload för bakgrundsbild -->
  <link rel="preload" href="assets/bg-stars.jpeg" as="image">

  <style>
    /* --- Reset --- */
    * { margin: 0; padding: 0; }

    /* --- Basinställningar + perspektiv + fallback-bakgrund --- */
    body, html {
      width: 100%; height: 100%;
      font-family: "Droid Sans", arial, sans-serif;
      font-weight: 700;
      color: #ff6;
      overflow: hidden;
      position: relative;
      perspective: 800px;  /* Djup för 3D-animationer */
      background: url('assets/bg-stars.jpeg') no-repeat center top;  /* Fallback */
      background-size: cover;
    }

    /* --- Animerad stjärnhimmel via pseudo-element --- */
    body::before {
      content: "";
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 200vh;  /* Dubbel höjd för scroll */
      background: url('assets/bg-stars.jpeg') no-repeat center top;
      background-size: cover;
      transform: translateY(0);
      z-index: -1;
    }
    body.falling::before {
      animation: starsFall 10s linear forwards;
    }
    @keyframes starsFall {
      to { transform: translateY(-30vh); }  /* Flytta ned bakgrund */
    }

    .hidden { display: none; }

    /* --- Countdown --- */
    #countdown {
      position: absolute;
      top: 10px; left: 50%; transform: translateX(-50%);
      font-size: 2rem; color: #ffe81f; z-index: 1000;
    }

    /* --- Startknapp w/ glow + shine --- */
    #start-button {
      position: absolute; top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      font-size: 1.8em; padding: 20px 40px;
      background-color: #ffe81f; color: black;
      border: none; border-radius: 10px;
      cursor: pointer; z-index: 1100;
      box-shadow: 0 0 8px #ffe81f, 0 0 16px #ff6;
      transition: transform 0.3s, box-shadow 0.3s;
      animation: button-glow 2.5s infinite ease-in-out;
      overflow: hidden;
    }
    @keyframes button-glow {
      0%,100% { box-shadow: 0 0 8px #ffe81f, 0 0 16px #ff6; }
      50%     { box-shadow: 0 0 12px #ffe81f, 0 0 24px #ff6; }
    }
    #start-button:hover {
      transform: translate(-50%, -50%) scale(1.1);
      box-shadow: 0 0 20px #ffe81f, 0 0 40px #ff6;
    }
    /* Shine‑svep */
    #start-button::before {
      content: "";
      position: absolute; top: 0; left: -75%;
      width: 50%; height: 100%;
      background: rgba(255,255,255,0.6);
      transform: skewX(-25deg);
      transition: left 0.7s ease-out;
    }
    #start-button:hover::before { left: 125%; }

    /* --- Intro-text --- */
    #start-text {
      position: relative; width: 16em; margin: 20% auto;
      font-size: 200%; font-weight: 400; color: #4ee;
      opacity: 0; z-index: 1;
      animation: intro 3s ease-out forwards;  /* 3s längd */
    }
    @keyframes intro {
      0%,90% { opacity: 1; }
      100%   { opacity: 0; }
    }

    /* --- SPAR WARS-logga --- */
    h1 {
      position: absolute; top:50%; left:50%;
      transform: translate(-50%,-50%) translateZ(0) scale(1);
      font-size:50em; line-height:0.8em; letter-spacing:-0.05em;
      color:#000;
      text-shadow: -2px -2px 0 #ff6, 2px -2px 0 #ff6, -2px 2px 0 #ff6, 2px 2px 0 #ff6;
      -webkit-text-stroke:18px #ffe81f;  /* Kantbredd */
      opacity:0; z-index:1;
      animation: logo 6s ease-out 0.5s forwards;  /* 0.5s delay */
    }
    @keyframes logo {
      0%   { transform: translate(-50%,-50%) translateZ(0) scale(1); opacity:1; }
      50%  { opacity:1; }
      100% { transform: translate(-50%,-50%) translateZ(-800px) scale(0.2); opacity:0; }
    }

    /* --- Crawl-text --- */
    #titles {
      position:absolute; width:18em; height:50em;
      bottom:0; left:50%; margin-left:-9em;
      font-size:350%; text-align:justify; overflow:hidden;
      transform-origin:50% 100%; transform:perspective(300px) rotateX(25deg);
    }
    #titles:after {
      content:""; position:absolute; top:0; left:0; right:0; bottom:60%;
      background: linear-gradient(to bottom, rgba(0,0,0,1) 0%, transparent 100%);
      pointer-events:none;
    }
    #titlecontent {
      position:absolute; top:100%;
      animation: scroll 25s linear forwards;  /* 25s crawltid */
    }
    @keyframes scroll {
      0%   { top:100%; }
      100% { top:-170%; }
    }

    /* --- Planetbild --- */
    #planet-effect {
      position:fixed; bottom:0; left:50%;
      transform:translateX(-50%) translateY(100%);
      width:100%; opacity:0; z-index:900;
    }
    #planet-effect.active-planet {
      animation: planetRise 10s ease-out forwards,
                 planetSpin 60s linear infinite;
    }
    @keyframes planetRise {
      from { transform:translateX(-50%) translateY(100%); opacity:0; }
      to   { transform:translateX(-50%) translateY(0vh);   opacity:1; }
    }
    @keyframes planetSpin {
      from { transform:translateX(-50%) translateY(0) rotate(0deg); }
      to   { transform:translateX(-50%) translateY(0) rotate(360deg); }
    }

    /* --- Final-elements --- */
    #final-elements {
      position:absolute; top:50%; left:50%;
      transform:translate(-50%,-50%); text-align:center;
      z-index:1050; opacity:0; transition:opacity 5s ease-in;
    }
    #final-elements:not(.hidden) {
      opacity:1;
      animation: finalBounce 0.8s ease-out forwards;
    }
    @keyframes finalBounce {
      0%  { transform:translate(-50%,-60%) scale(0.8); opacity:0; }
      60% { transform:translate(-50%,-45%) scale(1.05); opacity:1; }
      100%{ transform:translate(-50%,-50%) scale(1); }
    }

    /* --- Buttons hover text color --- */
    .hamburger-btn:hover span:nth-child(3) { color:black; }
  </style>
</head>
<body>
  <div id="countdown"></div>
  <button id="start-button">MAY THE JESP BE WITH YOU</button>
  <p id="start-text" class="hidden">
    A long time ago, in a cepheid far,<br> far away….
  </p>
  <h1 class="hidden">SPAR WARS</h1>
  <div id="titles" class="hidden">
    <div id="titlecontent">
      <p class="center">Episode TBD<br />RETURN OF THE JESP</p>
      <p>It is a period of vendor war.</p>
      <p>The Jedi Knight known only as JESP has been summoned back from self-imposed exile by the FIRST ORDER.</p>
      <p>After vanishing without a trace, JESP was secretly captured by the sinister GURULAB.</p>
      <p>The once-promising Jedi has now escaped and returned to his home planet of BROWSKIS.</p>
      <p>There, alongside the fierce Jedi Knights VDAO and ELS, young JESP must once again board the Milliliter FALCON Tube, a vessel fully equipped for the mission ahead.</p>
      <p>But JESP has no plan, but the voices of ORION will always guide him.</p>
      <p>Meanwhile, Senator TUKA, obsessed with locating JESP, has dispatched thousands of remote probes into the far reaches of space.</p>
      <p>The time of truth has come and the fate of the galaxy may hang in the balance…</p>
      <p>Unaware of the trials to come, JESP must now UNLEARN all that he once tried to learn.</p>
    </div>
  </div>
  <img id="planet-effect" class="hidden" src="assets/planet.png" alt="Planet">
  <div id="final-elements" class="hidden">
    <div id="main-title">RETURN OF THE JESP</div>
    <div id="buttons">
      <button class="hamburger-btn" data-sound="sound1.mp3"><span>J</span><span>J</span><span>believe</span></button>
      <button class="hamburger-btn" data-sound="sound2.mp3"><span>E</span><span>E</span><span>faith</span></button>
      <button class="hamburger-btn" data-sound="sound3.mp3"><span>S</span><span>S</span><span>trust</span></button>
      <button class="hamburger-btn" data-sound="sound4.mp3"><span>P</span><span>P</span><span>win</span></button>
    </div>
  </div>
  <audio id="bgMusic" src="assets/intro.mp3" preload="auto"></audio>
  <script>
    function sleep(ms){ return new Promise(res=>setTimeout(res,ms)); }

    async function startSequence(){
      document.getElementById("start-button").style.display="none";

      // Intro-text
      const intro = document.getElementById("start-text");
      intro.classList.remove("hidden");
      await sleep(3000); // intro i 3s

      // SPAR WARS-logga
      const logo = document.querySelector("h1");
      logo.classList.remove("hidden");
      await sleep(500);  // matcha CSS-delay

      // Starta musik exakt vid logga
      const bg = document.getElementById("bgMusic");
      bg.muted = false;
      bg.play().catch(()=>{});

      // Crawl-text
      const titles = document.getElementById("titles");
      titles.classList.remove("hidden");
      await sleep(25000); // crawl i 25s
      titles.style.display = "none";

      // Starta stjärnor + planet
      document.body.classList.add("falling");
      const planet = document.getElementById("planet-effect");
      planet.classList.remove("hidden");
      planet.classList.add("active-planet");

      // Visa finala element efter 10s
      await sleep(10000);
      document.getElementById("final-elements").classList.remove("hidden");
    }

    function updateCountdown(){
      const el = document.getElementById("countdown");
      const target = new Date("2025-05-01T00:00:00");
      (function tick(){
        const diff = target - new Date();
        if(diff<=0){
          el.textContent="The day has arrived!";
          return;
        }
        const d=Math.floor(diff/864e5),
              h=Math.floor(diff/36e5%24),
              m=Math.floor(diff/6e4%60),
              s=Math.floor(diff/1e3%60);
        el.textContent=`${d}d ${h}h ${m}m ${s}s`;
        setTimeout(tick,1000);
      })();
    }

    function setupSoundButtons(){
      document.querySelectorAll(".hamburger-btn").forEach(btn=>{
        btn.addEventListener("click",()=>{
          new Audio(`assets/${btn.dataset.sound}`).play().catch(()=>{});
        });
      });
    }

    updateCountdown();
    document.getElementById("start-button")
      .addEventListener("click", ()=>{
        setupSoundButtons();
        startSequence();
      });
  </script>
</body>
</html>
